# 小程序隐私保护指引配置指南

## 问题描述
当用户尝试使用微信授权登录时，可能会遇到以下错误：
```
getUserProfile:fail api scope is not declared in the privacy agreement
```

这个错误表示小程序的隐私保护指引未正确配置，需要在小程序管理后台进行相应设置。

## 解决方案

### 1. 登录小程序管理后台
1. 访问 [微信公众平台](https://mp.weixin.qq.com/)
2. 使用管理员账号登录
3. 进入对应的小程序管理后台

### 2. 配置隐私保护指引
1. 在左侧菜单中找到「设置」→「基本设置」
2. 找到「隐私保护指引」部分
3. 点击「配置」或「编辑」
4. 在隐私保护指引中添加以下内容：

#### 必须声明的信息类型
- **用户信息**：包括昵称、头像等基本信息
- **位置信息**（如果使用）：用于配送地址定位
- **设备信息**（如果使用）：用于优化用户体验

#### 示例隐私保护指引内容
```
我们会收集以下信息：
1. 用户信息：包括您的微信昵称、头像，用于个性化服务和订单管理
2. 位置信息：用于配送地址定位和附近商品推荐
3. 设备信息：用于优化应用性能和用户体验

我们承诺：
- 严格保护您的个人信息安全
- 不会将您的信息用于其他商业用途
- 您可以随时联系我们删除相关信息
```

### 3. 提交审核
1. 完成隐私保护指引配置后，点击「提交审核」
2. 等待微信官方审核通过（通常1-3个工作日）
3. 审核通过后，用户就可以正常使用微信授权登录功能

## 临时解决方案

在隐私保护指引审核期间，用户可以使用以下替代方案：

1. **快速登录**：使用手机号进行登录
2. **游客模式**：点击「暂不登录，先逛逛」浏览商品

## 代码适配

我们的代码已经做了相应的适配：

1. **错误检测**：自动检测隐私协议配置问题
2. **友好提示**：向用户展示清晰的错误说明和解决方案
3. **备选方案**：提供手机号登录等替代方式
4. **用户体验**：在页面上显示配置状态提示

## 相关链接

- [微信小程序隐私保护指引官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/user-privacy/)
- [隐私保护指引配置说明](https://developers.weixin.qq.com/community/develop/doc/00042e3ef54940ce8520e38db61801)
- [微信公众平台](https://mp.weixin.qq.com/)

## 联系支持

如果在配置过程中遇到问题，请联系技术支持团队。